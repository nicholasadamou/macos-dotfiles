#!/bin/bash

declare current_dir && \
    current_dir="$(dirname "${BASH_SOURCE[0]}")" && \
    cd "${current_dir}"

# DESCRIPTION
# Executes the command line interface.

# SETTINGS
set -o errexit
set -o pipefail

# VARIABLES
declare DOTFILES_PATH="$HOME/dotfiles"

# LIBRARY
source "$DOTFILES_PATH"/lib/utilities.sh
source "$DOTFILES_PATH"/lib/options.sh

# EXECUTION
main() {
	if [[ -d "$HOME" ]]; then
		while true; do
			if [[ $# == 0 ]]; then
				print_help
				read -r -p "[?] Enter selection: " response
				printf "\n"
				process_option "$response"
			else
				process_option "$@"
			fi
			break
		done
	else
		printf "[X] %s\n" "ERROR: $HOME does not exist."
		return 1
	fi
}

main "$@"
